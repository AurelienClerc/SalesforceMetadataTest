<apex:page controller="SiteLoginController" standardStylesheets="false" showHeader="false" applyHtmlTag="false">

    <html>
        <head>
            <script type="text/javascript">
                //Si on n'est pas dans l'iframe sur le site gac-group, on redirige vers la home du portail
               if(window.parent == window)
                   window.parent.location.href = 'https://group-gac.force.com/PortailATMP/apex/PortailAThome';
            </script>
            <apex:outputPanel layout="none" rendered="{!isLogged && $CurrentPage.parameters.portalRedirect == '1'}">
                <script type="text/javascript">
                    window.parent.location.href = 'https://group-gac.force.com/PortailATMP/apex/PortailAThome';
                </script>
            </apex:outputPanel>
            
            <style>
                body{
                    font-family: Raleway, Arial, sans-serif;
                    font-size: 12px;
                    color: #1d1d1f;
                    text-align: right;
                }
                
                .form-control{
                    padding: 4px;
                }
                
                input[type=submit]{
                    margin-left: 5px;
                    background-color: #052A57 !important;
                    border: 1px solid #02152D !important;
                }
                
                .bootstrapMe .form-group{
                    display: inline-block;
                    margin-bottom: 0;
                    vertical-align: middle;
                    width: 150px;
                }
                
                .bootstrapMe .input-group{
                    border-collapse: separate;
                    display: inline-table;
                    vertical-align: middle;
                }
                
                .bootstrapMe .input-group-addon{
                    width: auto !important;
                    background-color: #052A57;
                    border: 1px solid #02152D;
                    padding: 6px 8px;
                }
                
                .bootstrapMe .input-group-addon .glyphicon{
                    color: #EEE;
                }
                .errorMsg{
                    margin: 5px 0px 0px;
                    padding: 0;
                    list-style: none;
                    color: #F44336;
                }
                
                @media (max-width: 480px) {
                    .bootstrapMe .form-group {
                        width: 143px;
                        margin-bottom: 2px;
                    }
                    .bootstrapMe .btn-sm {
                        padding-top: 2px;
                        padding-bottom: 2px;
                    }
                }
            </style>
            
            <apex:stylesheet value="{!URLFOR($Resource.BootstrapPrefixed, '/css/bootstrap-prefixed.min.css')}" />
            
        </head>
        <body class="bootstrapMe">
            <apex:outputPanel layout="none" rendered="{!isLogged}">
                Bonjour {!$User.FirstName} {!$User.LastName}
                <br />
                <a href="https://group-gac.force.com/PortailATMP/apex/PortailAThome" target="_parent" >Accéder au portail</a>
                <br />
                <a href="/PortailATMP/secur/logout.jsp" >Déconnexion</a>
            </apex:outputPanel>
            
            
            <apex:form id="theForm" forceSSL="true" rendered="{!!isLogged}" styleClass="form-inline">
                
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
                        <apex:inputText id="username" value="{!username}" styleClass="form-control input-sm" html-placeholder="Identifiant"/>
                    </div>
                </div>
                
                <div class="form-group">
                    <div class="input-group">
                        <span class="input-group-addon"><span class="glyphicon glyphicon-lock"></span></span>
                        <apex:inputSecret id="password" value="{!password}" styleClass="form-control input-sm" html-placeholder="Mot de passe"/>
                    </div>
                </div>
                
                <apex:commandButton action="{!login}" value="{!$Label.site.submit}" id="submit" styleClass="btn btn-primary btn-sm"/>
                
                
                <apex:messages styleClass="errorMsg" />
                
            </apex:form>
        </body>
    </html>
</apex:page>